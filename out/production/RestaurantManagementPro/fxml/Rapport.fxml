<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.restaurant.controller.RapportController"
      fx:id="root"
      spacing="20"
      style="-fx-background-color:#f4f6f9;">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- ================= TITRE ================= -->
    <Label text="ðŸ“Š Rapports"
           style="-fx-font-size:20px;
                  -fx-font-weight:bold;
                  -fx-text-fill:#2c3e50;" />

    <!-- ================= INDICATEURS ================= -->
    <HBox spacing="20">

        <!-- COMMANDES -->
        <VBox spacing="5"
              style="-fx-background-color:white;
                     -fx-padding:15;
                     -fx-background-radius:10;
                     -fx-effect:dropshadow(gaussian, rgba(0,0,0,0.15), 8,0,0,2);">
            <Label text="ðŸ§¾ Commandes aujourdâ€™hui"
                   style="-fx-text-fill:#7f8c8d;"/>
            <Label fx:id="lblCommandesJour"
                   style="-fx-font-size:18px;
                          -fx-font-weight:bold;
                          -fx-text-fill:#2980b9;"/>
        </VBox>

        <!-- CA JOUR -->
        <VBox spacing="5"
              style="-fx-background-color:white;
                     -fx-padding:15;
                     -fx-background-radius:10;
                     -fx-effect:dropshadow(gaussian, rgba(0,0,0,0.15), 8,0,0,2);">
            <Label text="ðŸ’° CA aujourdâ€™hui"
                   style="-fx-text-fill:#7f8c8d;"/>
            <Label fx:id="lblCAJour"
                   style="-fx-font-size:18px;
                          -fx-font-weight:bold;
                          -fx-text-fill:#27ae60;"/>
        </VBox>

        <!-- CA MOIS -->
        <VBox spacing="5"
              style="-fx-background-color:white;
                     -fx-padding:15;
                     -fx-background-radius:10;
                     -fx-effect:dropshadow(gaussian, rgba(0,0,0,0.15), 8,0,0,2);">
            <Label text="ðŸ“… CA du mois"
                   style="-fx-text-fill:#7f8c8d;"/>
            <Label fx:id="lblCAMois"
                   style="-fx-font-size:18px;
                          -fx-font-weight:bold;
                          -fx-text-fill:#8e44ad;"/>
        </VBox>

    </HBox>

    <!-- ================= TOP PLATS ================= -->
    <Label text="ðŸ½ï¸ Top plats les plus vendus"
           style="-fx-font-size:16px;
                  -fx-font-weight:bold;
                  -fx-text-fill:#2c3e50;" />

    <TableView fx:id="tableTopPlats"
               prefHeight="200"
               style="-fx-background-radius:10;
                      -fx-effect:dropshadow(gaussian, rgba(0,0,0,0.15), 8,0,0,2);">

        <columns>
            <TableColumn fx:id="colPlat"
                         text="Plat"
                         prefWidth="250"/>
            <TableColumn fx:id="colQuantite"
                         text="QuantitÃ© vendue"
                         prefWidth="150"/>
        </columns>
    </TableView>

    <!-- ================= HISTORIQUE DES VENTES ================= -->
    <Label text="ðŸ§¾ Historique des ventes"
           style="-fx-font-size:16px;
                  -fx-font-weight:bold;
                  -fx-text-fill:#2c3e50;" />

    <TableView fx:id="tableVentes"
               prefHeight="250"
               style="-fx-background-radius:10;
                      -fx-effect:dropshadow(gaussian, rgba(0,0,0,0.15), 8,0,0,2);">

        <columns>
            <TableColumn fx:id="colDate"
                         text="Date"
                         prefWidth="150"/>
            <TableColumn fx:id="colFacture"
                         text="Facture"
                         prefWidth="100"/>
            <TableColumn fx:id="colTotal"
                         text="Montant"
                         prefWidth="120"/>
            <TableColumn fx:id="colMode"
                         text="Paiement"
                         prefWidth="120"/>
        </columns>
    </TableView>

    <!-- ================= EXPORTS ================= -->
    <HBox spacing="15">

        <Button text="ðŸ“Š Export Excel"
                onAction="#exporterExcel"
                style="-fx-background-color:#27ae60;
                       -fx-text-fill:white;
                       -fx-font-weight:bold;
                       -fx-background-radius:8;
                       -fx-padding:8 16;" />

        <Button text="ðŸ“„ Export PDF"
                onAction="#exporterPDF"
                style="-fx-background-color:#c0392b;
                       -fx-text-fill:white;
                       -fx-font-weight:bold;
                       -fx-background-radius:8;
                       -fx-padding:8 16;" />

    </HBox>

</VBox>
